<!DOCTYPE html>
<html lang="en">
<head>
  <script>
const password = "Activ8NPI";
let userPass = prompt("Enter password to access the Device Return Form:");
if(userPass !== password){
  alert("Incorrect password. Access denied.");
  window.location = "https://www.google.com"; // redirect if wrong
}
</script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Activ8 Device Return Form</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.1.7/dist/signature_pad.umd.min.js"></script>
  <style>
    body { font-family: SF Pro, sans-serif; background: #f9fafb; margin: 20px; }
    h1 { text-align: center; }
    form { max-width: 800px; margin: auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    label { display: block; margin-top: 15px; font-weight: bold; }
    input, select, textarea { width: 100%; padding: 8px; margin-top: 5px; border-radius: 6px; border: 1px solid #ccc; }
    .signature-container { border: 1px solid #ccc; border-radius: 6px; margin-top: 10px; background: #fdfdfd; }
    canvas { width: 100%; height: 150px; }
    button { margin-top: 20px; padding: 10px 20px; border: none; border-radius: 6px; background: black; color: white; cursor: pointer; }
    button:hover { opacity: 0.9; }
    .images-preview img { max-height: 100px; margin: 5px; border: 1px solid #ccc; border-radius: 6px; }
  </style>
</head>
<body>
  <h1>Device Return Form</h1>
  <form id="returnForm">
    <label>Store ID:<input type="number" id="storeId" inputmode="numeric" pattern="[0-9]*" placeholder="Enter Store ID"></label>
    <label>Store Name:<input type="text" id="storeName"></label>
    <label>Store Location:<input type="text" id="storeLocation"></label>
    <label>Team Member Name:
      <select id="teamMember">
        <!-- Add <option>Team Member Name</option> here -->
        <option>**SELECT NAME**</option>
        <option>Ruth Varkey</option>
        <option>Elliot Wilton</option>
        <option>Tess Wang</option>
        <option>Cody Garton</option>
        <option>Erin Bidois</option>
        <option>Abbie Jacobs</option>
        <option>RaukƒÅhu Gray-Sharp</option>
        <option>Finlay Davies</option>
        <option>Sid Mowat</option>
        <option>Amelia Johnston</option>
        <option>Michael Bailey</option>
        <option>Angus Clelland</option>
        <option>Ben Crowley</option>
        <option>Fenil Desai</option>
        <option>Janneke Grundemann</option>
        <option>Doug Kriel</option>
        <option>Riley Aitkin</option>
      </select>
    </label>
    
    
    <style>
  /* Add this to your existing <style> block */
  .checkbox-list {
  display: flex;
  flex-direction: column;
  gap: 5px;
  margin-top: 5px;
}

.checkbox-list label {
  display: flex;
  align-items: center;
  gap: 8px;        /* space between checkbox and text */
  font-weight: normal;
}

.checkbox-list input[type="checkbox"] {
  width: auto;      /* important! overrides the form-wide 100% width */
  margin: 0;        /* remove extra margin */
}
</style>

<label>Devices Returned:</label>
<div id="devicesReturned" class="checkbox-list">
  <label><input type="checkbox" value="iPhone 13"> iPhone 13</label>
  <label><input type="checkbox" value="iPhone 15"> iPhone 15</label>
  <label><input type="checkbox" value="iPhone 16e"> iPhone 16e</label>
  <label><input type="checkbox" value="iPhone 16"> iPhone 16</label>
  <label><input type="checkbox" value="iPhone 16 Plus"> iPhone 16 Plus</label>
  <label><input type="checkbox" value="iPhone 16 Pro"> iPhone 16 Pro</label>
  <label><input type="checkbox" value="iPhone 16 Pro Max"> iPhone 16 Pro Max</label>
  <label><input type="checkbox" value="Apple Watch SE"> Apple Watch SE</label>
  <label><input type="checkbox" value="Apple Watch Series 10"> Apple Watch Series 10</label>
  <label><input type="checkbox" value="Apple Watch Ultra 2"> Apple Watch Ultra 2</label>
  <label><input type="checkbox" value="iPad A16"> iPad A16</label>
  <label><input type="checkbox" value="iPad Air 11"> iPad Air 11"</label>
  <label><input type="checkbox" value="iPad Air 13"> iPad Air 13"</label>
  <label><input type="checkbox" value="iPad Pro 11"> iPad Pro 11"</label>
  <label><input type="checkbox" value="MacBook Air 13 M2"> MacBook Air 13" M2</label>
  <label><input type="checkbox" value="MacBook Air 13 M4"> MacBook Air 13" M4</label>
  <label><input type="checkbox" value="MacBook Air 15 M4"> MacBook Air 15" M4</label>
  <label><input type="checkbox" value="MacBook Pro 14 M4"> MacBook Pro 14" M4</label>
  <label><input type="checkbox" value="MacBook Pro 14 M4 Pro"> MacBook Pro 14" M4 Pro</label>
  <label><input type="checkbox" value="iMac 24 M4"> iMac 24" M4</label>
  <label><input type="checkbox" value="Mac mini M4"> Mac mini M4</label>
  <label><input type="checkbox" value="Studio Display"> Studio Display</label>
  <label><input type="checkbox" value="HomePod mini"> HomePod mini</label>
  <label><input type="checkbox" value="HomePod"> HomePod</label>
  <label><input type="checkbox" value="AirPods Max"> AirPods Max</label>
</div>


    
      </select>
    </label>
    <label>Are any devices Damaged?
      <select id="damaged">
        <option value="">Select...</option>
        <option value="Yes">Yes</option>
        <option value="No">No</option>
      </select>
    </label>
    <label>Image of Devices with their accessories:<input type="file" id="accessoryImage" accept="image/*"></label>
    <div id="accessoryPreview" class="images-preview"></div>
    <label>Upload images of damage:<input type="file" id="damageImages" accept="image/*" multiple></label>
    <div id="damagePreview" class="images-preview"></div>
    <label>Date and Time of return:<input type="datetime-local" id="returnDateTime"></label>
    <label>Store Team Member (who devices are being returned to):<input type="text" id="storeMember"></label>
    <label>Store Team Member Position:<input type="text" id="storePosition"></label>
    <label>Store Team Member Phone Number:<input type="tel" id="storePhone" inputmode="tel" placeholder="Enter Phone Number"></label>
    <label>Signature:</label>
    <div class="signature-container">
      <canvas id="signature-pad"></canvas>
    </div>
    <button type="button" onclick="clearSignature()">Clear Signature</button>
    <button type="button" onclick="generatePDF()">Export PDF</button>
  </form>

  <script>
    const { jsPDF } = window.jspdf;
    const canvas = document.getElementById('signature-pad');
    const signaturePad = new SignaturePad(canvas);

    function clearSignature() {
      signaturePad.clear();
    }

    function previewImages(input, previewContainer) {
      const container = document.getElementById(previewContainer);
      container.innerHTML = '';
      Array.from(input.files).forEach(file => {
        const reader = new FileReader();
        reader.onload = e => {
          const img = document.createElement('img');
          img.src = e.target.result;
          container.appendChild(img);
        };
        reader.readAsDataURL(file);
      });
    }

    document.getElementById('accessoryImage').addEventListener('change', e => previewImages(e.target, 'accessoryPreview'));
    document.getElementById('damageImages').addEventListener('change', e => previewImages(e.target, 'damagePreview'));

    function generatePDF() {
  const pdf = new jsPDF('p', 'pt', 'a4');
  let y = 40;
  const lineHeight = 20;

  pdf.setFontSize(16);
  pdf.text("Device Return Form", 40, y);
  y += lineHeight * 2;

  pdf.setFontSize(12);
  pdf.text(`Store ID: ${document.getElementById('storeId').value}`, 40, y);
  y += lineHeight;
  pdf.text(`Store Name: ${document.getElementById('storeName').value}`, 40, y);
  y += lineHeight;
  pdf.text(`Team Member: ${document.getElementById('teamMember').value}`, 40, y);
  y += lineHeight;

  // Devices returned
  const devicesChecked = Array.from(document.querySelectorAll('#devicesReturned input[type=checkbox]:checked'))
                              .map(cb => cb.value);
  pdf.text(`Devices Returned:`, 40, y);
  y += lineHeight;
  devicesChecked.forEach(device => {
    pdf.text(`- ${device}`, 60, y);
    y += lineHeight;
  });

  pdf.text(`Any Devices Damaged: ${document.getElementById('damaged').value}`, 40, y);
  y += lineHeight;

  pdf.text(`Return Date & Time: ${document.getElementById('returnDateTime').value}`, 40, y);
  y += lineHeight;
  pdf.text(`Returned To: ${document.getElementById('storeMember').value}`, 40, y);
  y += lineHeight;
  pdf.text(`Position: ${document.getElementById('storePosition').value}`, 40, y);
  y += lineHeight;
  pdf.text(`Phone: ${document.getElementById('storePhone').value}`, 40, y);
  y += lineHeight;

  // Add signature
  if (!signaturePad.isEmpty()) {
    const sigData = signaturePad.toDataURL();
    pdf.addImage(sigData, 'PNG', 40, y, 150, 50);
  }

  const storeId = document.getElementById('storeId').value || 'device-return';
pdf.save(`${storeId}.pdf`);
}
  </script>
</body>
</html>
